!function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new AFRAME.THREE.FileLoader;return new Ne(function(n,r){e.load(t,n,function(){},r)})}var r=e(function(t){!function(e){function n(t,e,n,o){var a=e&&e.prototype instanceof i?e:i,u=Object.create(a.prototype),c=new h(o||[]);return u._invoke=function(t,e,n){var i=E;return function(o,a){if(i===S)throw new Error("Generator is already running");if(i===O){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=s(u,n);if(c){if(c===A)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===E)throw i=O,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=S;var f=r(t,e,n);if("normal"===f.type){if(i=n.done?O:L,f.arg===A)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(i=O,n.method="throw",n.arg=f.arg)}}}(t,n,c),u}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function a(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){function e(n,i,o,a){var u=r(t[n],t,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==typeof s&&g.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(s).then(function(t){c.value=t,o(c)},a)}a(u.arg)}var n;this._invoke=function(t,r){function i(){return new Promise(function(n,i){e(t,r,n,i)})}return n=n?n.then(i,i):i()}}function s(t,e){var n=t.iterator[e.method];if(n===d){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=d,s(t,e),"throw"===e.method))return A;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,A;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=d),e.delegate=null,A):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,A)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function l(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function p(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=d,e.done=!0,e};return r.next=r}}return{next:v}}function v(){return{value:d,done:!0}}var d,y=Object.prototype,g=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},w=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",_=m.toStringTag||"@@toStringTag",x=e.regeneratorRuntime;if(x)t.exports=x;else{(x=e.regeneratorRuntime=t.exports).wrap=n;var E="suspendedStart",L="suspendedYield",S="executing",O="completed",A={},j={};j[w]=function(){return this};var P=Object.getPrototypeOf,k=P&&P(P(p([])));k&&k!==y&&g.call(k,w)&&(j=k);var T=a.prototype=i.prototype=Object.create(j);o.prototype=T.constructor=a,a.constructor=o,a[_]=o.displayName="GeneratorFunction",x.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},x.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(T),t},x.awrap=function(t){return{__await:t}},u(c.prototype),c.prototype[b]=function(){return this},x.AsyncIterator=c,x.async=function(t,e,r,i){var o=new c(n(t,e,r,i));return x.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},u(T),T[_]="Generator",T[w]=function(){return this},T.toString=function(){return"[object Generator]"},x.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},x.values=p,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(l),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=d)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=d),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),u=g.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),l(n),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;l(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:p(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=d),A}}}}(function(){return this}()||Function("return this")())}),i=function(){return this}()||Function("return this")(),o=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,a=o&&i.regeneratorRuntime;i.regeneratorRuntime=void 0;var u=r;if(o)i.regeneratorRuntime=a;else try{delete i.regeneratorRuntime}catch(t){i.regeneratorRuntime=void 0}var c=u,s=Math.ceil,f=Math.floor,l=function(t){return isNaN(t=+t)?0:(t>0?f:s)(t)},h=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},p=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),v=e(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),d=(v.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),y=function(t,e,n){if(d(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},g=function(t){return"object"==typeof t?null!==t:"function"==typeof t},m=function(t){if(!g(t))throw TypeError(t+" is not an object!");return t},w=function(t){try{return!!t()}catch(t){return!0}},b=!w(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),_=p.document,x=g(_)&&g(_.createElement),E=function(t){return x?_.createElement(t):{}},L=!b&&!w(function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a}),S=Object.defineProperty,O={f:b?Object.defineProperty:function(t,e,n){if(m(t),e=function(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),m(n),L)try{return S(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},A=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},j=b?function(t,e,n){return O.f(t,e,A(1,n))}:function(t,e,n){return t[e]=n,t},P="prototype",k=function(t,e,n){var r,i,o,a=t&k.F,u=t&k.G,c=t&k.S,s=t&k.P,f=t&k.B,l=t&k.W,h=u?v:v[e]||(v[e]={}),d=h[P],g=u?p:c?p[e]:(p[e]||{})[P];u&&(n=e);for(r in n)(i=!a&&g&&void 0!==g[r])&&r in h||(o=i?g[r]:n[r],h[r]=u&&"function"!=typeof g[r]?n[r]:f&&i?y(o,p):l&&g[r]==o?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[P]=t[P],e}(o):s&&"function"==typeof o?y(Function.call,o):o,s&&((h.virtual||(h.virtual={}))[r]=o,t&k.R&&d&&!d[r]&&j(d,r,o)))};k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,k.U=64,k.R=128;var T=k,M=j,R={}.hasOwnProperty,F=function(t,e){return R.call(t,e)},C={},N={}.toString,G=function(t){return N.call(t).slice(8,-1)},I=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==G(t)?t.split(""):Object(t)},D=function(t){return I(h(t))},q=Math.min,H=function(t){return t>0?q(l(t),9007199254740991):0},V=Math.max,z=Math.min,B="__core-js_shared__",W=p[B]||(p[B]={}),U=function(t){return W[t]||(W[t]={})},J=0,K=Math.random(),Y=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++J+K).toString(36))},Q=U("keys"),X=function(t){return Q[t]||(Q[t]=Y(t))},Z=function(t){return function(e,n,r){var i,o=D(e),a=H(o.length),u=function(t,e){return(t=l(t))<0?V(t+e,0):z(t,e)}(r,a);if(t&&n!=n){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((t||u in o)&&o[u]===n)return t||u||0;return!t&&-1}}(!1),$=X("IE_PROTO"),tt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),et=Object.keys||function(t){return function(t,e){var n,r=D(t),i=0,o=[];for(n in r)n!=$&&F(r,n)&&o.push(n);for(;e.length>i;)F(r,n=e[i++])&&(~Z(o,n)||o.push(n));return o}(t,tt)},nt=b?Object.defineProperties:function(t,e){m(t);for(var n,r=et(e),i=r.length,o=0;i>o;)O.f(t,n=r[o++],e[n]);return t},rt=p.document,it=rt&&rt.documentElement,ot=X("IE_PROTO"),at=function(){},ut="prototype",ct=function(){var t,e=E("iframe"),n=tt.length;for(e.style.display="none",it.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ct=t.F;n--;)delete ct[ut][tt[n]];return ct()},st=Object.create||function(t,e){var n;return null!==t?(at[ut]=m(t),n=new at,at[ut]=null,n[ot]=t):n=ct(),void 0===e?n:nt(n,e)},ft=e(function(t){var e=U("wks"),n=p.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:Y)("Symbol."+t))}).store=e}),lt=O.f,ht=ft("toStringTag"),pt=function(t,e,n){t&&!F(t=n?t:t.prototype,ht)&&lt(t,ht,{configurable:!0,value:e})},vt={};j(vt,ft("iterator"),function(){return this});var dt=X("IE_PROTO"),yt=Object.prototype,gt=Object.getPrototypeOf||function(t){return t=function(t){return Object(h(t))}(t),F(t,dt)?t[dt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?yt:null},mt=ft("iterator"),wt=!([].keys&&"next"in[].keys()),bt="values",_t=function(){return this},xt=function(t,e,n,r,i,o,a){!function(t,e,n){t.prototype=st(vt,{next:A(1,n)}),pt(t,e+" Iterator")}(n,e,r);var u,c,s,f=function(t){if(!wt&&t in v)return v[t];switch(t){case"keys":case bt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},l=e+" Iterator",h=i==bt,p=!1,v=t.prototype,d=v[mt]||v["@@iterator"]||i&&v[i],y=d||f(i),g=i?h?f("entries"):y:void 0,m="Array"==e?v.entries||d:d;if(m&&(s=gt(m.call(new t)))!==Object.prototype&&s.next&&pt(s,l,!0),h&&d&&d.name!==bt&&(p=!0,y=function(){return d.call(this)}),a&&(wt||p||!v[mt])&&j(v,mt,y),C[e]=y,C[l]=_t,i)if(u={values:h?y:f(bt),keys:o?y:f("keys"),entries:g},a)for(c in u)c in v||M(v,c,u[c]);else T(T.P+T.F*(wt||p),e,u);return u},Et=function(t){return function(e,n){var r,i,o=String(h(e)),a=l(n),u=o.length;return a<0||a>=u?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}(!0);xt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Et(e,n),this._i+=t.length,{value:t,done:!1})});var Lt=function(t,e){return{value:e,done:!!t}};xt(Array,"Array",function(t,e){this._t=D(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Lt(1)):"keys"==e?Lt(0,n):"values"==e?Lt(0,t[n]):Lt(0,[n,t[n]])},"values");C.Arguments=C.Array;for(var St=ft("toStringTag"),Ot="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),At=0;At<Ot.length;At++){var jt=Ot[At],Pt=p[jt],kt=Pt&&Pt.prototype;kt&&!kt[St]&&j(kt,St,jt),C[jt]=C.Array}var Tt,Mt,Rt,Ft=ft("toStringTag"),Ct="Arguments"==G(function(){return arguments}()),Nt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ft))?n:Ct?G(e):"Object"==(r=G(e))&&"function"==typeof e.callee?"Arguments":r},Gt=function(t,e,n,r){try{return r?e(m(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&m(i.call(t)),e}},It=ft("iterator"),Dt=Array.prototype,qt=ft("iterator"),Ht=v.getIteratorMethod=function(t){if(void 0!=t)return t[qt]||t["@@iterator"]||C[Nt(t)]},Vt=e(function(t){var e={},n={},r=t.exports=function(t,r,i,o,a){var u,c,s,f,l=a?function(){return t}:Ht(t),h=y(i,o,r?2:1),p=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(C.Array===t||Dt[It]===t)}(l)){for(u=H(t.length);u>p;p++)if((f=r?h(m(c=t[p])[0],c[1]):h(t[p]))===e||f===n)return f}else for(s=l.call(t);!(c=s.next()).done;)if((f=Gt(s,h,c.value,r))===e||f===n)return f};r.BREAK=e,r.RETURN=n}),zt=ft("species"),Bt=function(t,e){var n,r=m(t).constructor;return void 0===r||void 0==(n=m(r)[zt])?e:d(n)},Wt=p.process,Ut=p.setImmediate,Jt=p.clearImmediate,Kt=p.MessageChannel,Yt=p.Dispatch,Qt=0,Xt={},Zt="onreadystatechange",$t=function(){var t=+this;if(Xt.hasOwnProperty(t)){var e=Xt[t];delete Xt[t],e()}},te=function(t){$t.call(t.data)};Ut&&Jt||(Ut=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Xt[++Qt]=function(){!function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},Tt(Qt),Qt},Jt=function(t){delete Xt[t]},"process"==G(Wt)?Tt=function(t){Wt.nextTick(y($t,t,1))}:Yt&&Yt.now?Tt=function(t){Yt.now(y($t,t,1))}:Kt?(Rt=(Mt=new Kt).port2,Mt.port1.onmessage=te,Tt=y(Rt.postMessage,Rt,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(Tt=function(t){p.postMessage(t+"","*")},p.addEventListener("message",te,!1)):Tt=Zt in E("script")?function(t){it.appendChild(E("script"))[Zt]=function(){it.removeChild(this),$t.call(t)}}:function(t){setTimeout(y($t,t,1),0)});var ee={set:Ut,clear:Jt},ne=ee.set,re=p.MutationObserver||p.WebKitMutationObserver,ie=p.process,oe=p.Promise,ae="process"==G(ie),ue={f:function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=d(e),this.reject=d(n)}(t)}},ce=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},se=function(t,e){if(m(t),g(e)&&e.constructor===t)return e;var n=ue.f(t);return(0,n.resolve)(e),n.promise},fe=ft("species"),le=ft("iterator"),he=!1;try{[7][le]().return=function(){he=!0}}catch(t){}var pe,ve,de,ye,ge=ee.set,me=function(){var t,e,n,r=function(){var r,i;for(ae&&(r=ie.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(ae)n=function(){ie.nextTick(r)};else if(re){var i=!0,o=document.createTextNode("");new re(r).observe(o,{characterData:!0}),n=function(){o.data=i=!i}}else if(oe&&oe.resolve){var a=oe.resolve();n=function(){a.then(r)}}else n=function(){ne.call(p,r)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),we="Promise",be=p.TypeError,_e=p.process,xe=p[we],Ee="process"==Nt(_e),Le=function(){},Se=ve=ue.f,Oe=!!function(){try{var t=xe.resolve(1),e=(t.constructor={})[ft("species")]=function(t){t(Le,Le)};return(Ee||"function"==typeof PromiseRejectionEvent)&&t.then(Le)instanceof e}catch(t){}}(),Ae=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},je=function(t,e){if(!t._n){t._n=!0;var n=t._c;me(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,u=e.resolve,c=e.reject,s=e.domain;try{a?(i||(2==t._h&&Te(t),t._h=1),!0===a?n=r:(s&&s.enter(),n=a(r),s&&s.exit()),n===e.promise?c(be("Promise-chain cycle")):(o=Ae(n))?o.call(n,u,c):u(n)):c(r)}catch(t){c(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&Pe(t)})}},Pe=function(t){ge.call(p,function(){var e,n,r,i=t._v,o=ke(t);if(o&&(e=ce(function(){Ee?_e.emit("unhandledRejection",i,t):(n=p.onunhandledrejection)?n({promise:t,reason:i}):(r=p.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=Ee||ke(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},ke=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if((e=n[r++]).fail||!ke(e.promise))return!1;return!0},Te=function(t){ge.call(p,function(){var e;Ee?_e.emit("rejectionHandled",t):(e=p.onrejectionhandled)&&e({promise:t,reason:t._v})})},Me=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),je(e,!0))},Re=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw be("Promise can't be resolved itself");(e=Ae(t))?me(function(){var r={_w:n,_d:!1};try{e.call(t,y(Re,r,1),y(Me,r,1))}catch(t){Me.call(r,t)}}):(n._v=t,n._s=1,je(n,!1))}catch(t){Me.call({_w:n,_d:!1},t)}}};Oe||(xe=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,xe,we,"_h"),d(t),pe.call(this);try{t(y(Re,this,1),y(Me,this,1))}catch(t){Me.call(this,t)}},(pe=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:j(t,r,e[r]);return t}(xe.prototype,{then:function(t,e){var n=Se(Bt(this,xe));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Ee?_e.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&je(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),de=function(){var t=new pe;this.promise=t,this.resolve=y(Re,t,1),this.reject=y(Me,t,1)},ue.f=Se=function(t){return t===xe||t===ye?new de(t):ve(t)}),T(T.G+T.W+T.F*!Oe,{Promise:xe}),pt(xe,we),function(t){var e="function"==typeof v[t]?v[t]:p[t];b&&e&&!e[fe]&&O.f(e,fe,{configurable:!0,get:function(){return this}})}(we),ye=v[we],T(T.S+T.F*!Oe,we,{reject:function(t){var e=Se(this);return(0,e.reject)(t),e.promise}}),T(T.S+!0*T.F,we,{resolve:function(t){return se(this===ye?xe:this,t)}}),T(T.S+T.F*!(Oe&&function(t,e){if(!e&&!he)return!1;var n=!1;try{var r=[7],i=r[le]();i.next=function(){return{done:n=!0}},r[le]=function(){return i},t(r)}catch(t){}return n}(function(t){xe.all(t).catch(Le)})),we,{all:function(t){var e=this,n=Se(e),r=n.resolve,i=n.reject,o=ce(function(){var n=[],o=0,a=1;Vt(t,!1,function(t){var u=o++,c=!1;n.push(void 0),a++,e.resolve(t).then(function(t){c||(c=!0,n[u]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=Se(e),r=n.reject,i=ce(function(){Vt(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),T(T.P+T.R,"Promise",{finally:function(t){var e=Bt(this,v.Promise||p.Promise),n="function"==typeof t;return this.then(n?function(n){return se(e,t()).then(function(){return n})}:t,n?function(n){return se(e,t()).then(function(){throw n})}:t)}}),T(T.S,"Promise",{try:function(t){var e=ue.f(this),n=ce(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var Fe=v.Promise,Ce=e(function(t){t.exports={default:Fe,__esModule:!0}}),Ne=t(Ce),Ge=t(e(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(Ce);e.default=function(t){return function(){var e=t.apply(this,arguments);return new n.default(function(t,r){function i(o,a){try{var u=e[o](a),c=u.value}catch(t){return void r(t)}if(!u.done)return n.default.resolve(c).then(function(t){i("next",t)},function(t){i("throw",t)});t(c)}return i("next")})}}}));AFRAME.registerComponent("place-for-space",{schema:{templates:{default:[]},mixins:{default:[]},otherwise:{default:""}},init:function(){var t=Ge(c.mark(function t(){var e,n;return c.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,altspace.getSpace();case 2:e=t.sent,console.log(e),(n=this.data.templates.indexOf(e.templateSid))>=0?this.el.setAttribute("mixin",this.data.mixins[n]):this.el.setAttribute("mixin",this.data.otherwise);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),AFRAME.registerComponent("library-page",{schema:{service:{type:"string",default:"poly"},page:{type:"int",default:0}},update:function(){var t=Ge(c.mark(function t(e){return c.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.el.emit("pageupdatestart"),t.prev=1,t.next=4,this.el.sceneEl.systems[this.data.service+"-service"].getListing(this.data.page);case 4:this.currentPage=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0.stack);case 10:this.el.emit("pageupdateend");case 11:case"end":return t.stop()}},t,this,[[1,7]])}));return function(e){return t.apply(this,arguments)}}()}),AFRAME.registerComponent("library-item",{schema:{type:"int"},init:function(){this.el.parentElement.addEventListener("pageupdatestart",this.showLoading.bind(this)),this.el.parentElement.addEventListener("pageupdateend",this.updateContents.bind(this)),this.el.addEventListener("materialtextureloaded",this.updateDimensions.bind(this))},showLoading:function(){this.el.setAttribute("avr-visible",!1)},updateContents:function(){var t=this.el.parentElement.components["library-page"].currentPage.assets[this.data];t&&this.el.setAttribute("src",t.thumbnail.url)},updateDimensions:function(){var t=this.el.object3DMap.mesh.material.map,e=t?t.image:{width:1,height:1},n=e.width/e.height;n>1?this.el.setAttribute("scale",{x:1,y:1/n,z:1}):this.el.setAttribute("scale",{x:n,y:1,z:1});this.el.parentElement.components["library-page"].currentPage.assets[this.data]?this.el.setAttribute("avr-visible",!0):this.el.setAttribute("avr-visible",!1)}}),AFRAME.registerComponent("library-advance",{schema:{type:"int"},init:function(){this.el.addEventListener("click",this.advance.bind(this)),this.el.parentElement.addEventListener("pageupdateend",this.updatePaging.bind(this))},advance:function(){var t=this.el.parentElement,e=t.getAttribute("library-page").page;t.setAttribute("library-page","page",e+this.data)},showLoading:function(){this.el.setAttribute("avr-visible",!1)},updatePaging:function(){var t=this.el.parentElement.components["library-page"];this.el.sceneEl.systems["poly-service"].pages[t.data.page+this.data]||this.data>0&&t.currentPage.nextPageToken?this.el.setAttribute("avr-visible",!0):this.el.setAttribute("avr-visible",!1)}}),AFRAME.registerSystem("poly-service",{schema:{key:{type:"string"}},init:function(){this.pages=[],this.loader=new AFRAME.THREE.FileLoader,this.query="https://poly.googleapis.com/v1/assets/?format=GLTF2&maxComplexity=SIMPLE&pageSize=20&key="+this.data.key},getListing:function(){var t=Ge(c.mark(function t(e){var r,i,o,a,u;return c.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("attemping grab of page",e),!(e<0)){t.next=3;break}throw new Error("Requested page ("+e+") before beginning");case 3:if(!this.pages[e]){t.next=7;break}return t.abrupt("return",this.pages[e]);case 7:if(0!==e){t.next=16;break}return t.next=10,n(this.query,this.loader);case 10:return r=t.sent,i=JSON.parse(r),this.pages.push(i),t.abrupt("return",i);case 16:return o={},t.prev=17,t.next=20,this.getListing(e-1);case 20:o=t.sent,t.next=27;break;case 23:throw t.prev=23,t.t0=t.catch(17),console.log(t.t0.stack),new Error("Requested page ("+e+") past end, no previous page");case 27:if(!o.nextPageToken){t.next=36;break}return t.next=30,n(this.query+"&pageToken="+o.nextPageToken,this.loader);case 30:return a=t.sent,u=JSON.parse(a),this.pages.push(u),t.abrupt("return",u);case 36:throw new Error("Requested page ("+e+") past end, no page token");case 37:case"end":return t.stop()}},t,this,[[17,23]])}));return function(e){return t.apply(this,arguments)}}(),fakeGetListing:function(){var t=Ge(c.mark(function t(e){var r;return c.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("testdata/listing.json",this.loader);case 2:return r=t.sent,t.abrupt("return",JSON.parse(r));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}),AFRAME.registerComponent("avr-visible",{schema:{type:"boolean",default:!0},update:function(){var t=this;this.el.object3D.traverse(function(e){return e.visible=t.data})}});AFRAME.registerComponent("hover-scale",{init:function(){var t=this;this.el.setAttribute("animation__hover",{startEvents:["hoverstart","mouseleave"],property:"scale",dir:"alternate",dur:200}),this.el.addEventListener("mouseenter",function(){var e=function(t,e){return e.map(function(e){return t[e]})}(t.el.getAttribute("scale"),["x","y","z"]),n=e.map(function(t){return 1.2*t});console.log(e,n),t.el.setAttribute("animation__hover",{to:n.join(" ")}),t.el.emit("hoverstart")})}})}();
//# sourceMappingURL=bundle.min.js.map
//# sourceMappingURL=bundle.min.js.map
