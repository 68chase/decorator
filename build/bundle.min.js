!function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new AFRAME.THREE.FileLoader;return new Ge(function(r,n){e.load(t,r,function(){},n)})}var n=e(function(t){!function(e){function r(t,e,r,i){var a=e&&e.prototype instanceof o?e:o,c=Object.create(a.prototype),u=new h(i||[]);return c._invoke=function(t,e,r){var o=L;return function(i,a){if(o===O)throw new Error("Generator is already running");if(o===S){if("throw"===i)throw a;return v()}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var u=s(c,r);if(u){if(u===j)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===L)throw o=S,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=O;var f=n(t,e,r);if("normal"===f.type){if(o=r.done?S:E,f.arg===j)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(o=S,r.method="throw",r.arg=f.arg)}}}(t,r,u),c}function n(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function a(){}function c(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(r,o,i,a){var c=n(t[r],t,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&g.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(s).then(function(t){u.value=t,i(u)},a)}a(c.arg)}var r;this._invoke=function(t,n){function o(){return new Promise(function(r,o){e(t,n,r,o)})}return r=r?r.then(o,o):o()}}function s(t,e){var r=t.iterator[e.method];if(r===d){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=d,s(t,e),"throw"===e.method))return j;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}var o=n(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,j;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=d),e.delegate=null,j):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,j)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function l(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function p(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(g.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=d,e.done=!0,e};return n.next=n}}return{next:v}}function v(){return{value:d,done:!0}}var d,y=Object.prototype,g=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},w=m.iterator||"@@iterator",_=m.asyncIterator||"@@asyncIterator",x=m.toStringTag||"@@toStringTag",b=e.regeneratorRuntime;if(b)t.exports=b;else{(b=e.regeneratorRuntime=t.exports).wrap=r;var L="suspendedStart",E="suspendedYield",O="executing",S="completed",j={},P={};P[w]=function(){return this};var T=Object.getPrototypeOf,k=T&&T(T(p([])));k&&k!==y&&g.call(k,w)&&(P=k);var M=a.prototype=o.prototype=Object.create(P);i.prototype=M.constructor=a,a.constructor=i,a[x]=i.displayName="GeneratorFunction",b.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},b.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(M),t},b.awrap=function(t){return{__await:t}},c(u.prototype),u.prototype[_]=function(){return this},b.AsyncIterator=u,b.async=function(t,e,n,o){var i=new u(r(t,e,n,o));return b.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},c(M),M[x]="Generator",M[w]=function(){return this},M.toString=function(){return"[object Generator]"},b.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},b.values=p,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(l),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=d)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return i.type="throw",i.arg=t,r.next=e,n&&(r.method="next",r.arg=d),!!n}if(this.done)throw t;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=g.call(o,"catchLoc"),c=g.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,j):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),j},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),l(r),j}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;l(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:p(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=d),j}}}}(function(){return this}()||Function("return this")())}),o=function(){return this}()||Function("return this")(),i=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,a=i&&o.regeneratorRuntime;o.regeneratorRuntime=void 0;var c=n;if(i)o.regeneratorRuntime=a;else try{delete o.regeneratorRuntime}catch(t){o.regeneratorRuntime=void 0}var u=c,s=Math.ceil,f=Math.floor,l=function(t){return isNaN(t=+t)?0:(t>0?f:s)(t)},h=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},p=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),v=e(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),d=(v.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),y=function(t,e,r){if(d(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},g=function(t){return"object"==typeof t?null!==t:"function"==typeof t},m=function(t){if(!g(t))throw TypeError(t+" is not an object!");return t},w=function(t){try{return!!t()}catch(t){return!0}},_=!w(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),x=p.document,b=g(x)&&g(x.createElement),L=function(t){return b?x.createElement(t):{}},E=!_&&!w(function(){return 7!=Object.defineProperty(L("div"),"a",{get:function(){return 7}}).a}),O=Object.defineProperty,S={f:_?Object.defineProperty:function(t,e,r){if(m(t),e=function(t,e){if(!g(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!g(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!g(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!g(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}(e,!0),m(r),E)try{return O(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},j=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},P=_?function(t,e,r){return S.f(t,e,j(1,r))}:function(t,e,r){return t[e]=r,t},T="prototype",k=function(t,e,r){var n,o,i,a=t&k.F,c=t&k.G,u=t&k.S,s=t&k.P,f=t&k.B,l=t&k.W,h=c?v:v[e]||(v[e]={}),d=h[T],g=c?p:u?p[e]:(p[e]||{})[T];c&&(r=e);for(n in r)(o=!a&&g&&void 0!==g[n])&&n in h||(i=o?g[n]:r[n],h[n]=c&&"function"!=typeof g[n]?r[n]:f&&o?y(i,p):l&&g[n]==i?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[T]=t[T],e}(i):s&&"function"==typeof i?y(Function.call,i):i,s&&((h.virtual||(h.virtual={}))[n]=i,t&k.R&&d&&!d[n]&&P(d,n,i)))};k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,k.U=64,k.R=128;var M=k,R=P,A={}.hasOwnProperty,F=function(t,e){return A.call(t,e)},N={},G={}.toString,C=function(t){return G.call(t).slice(8,-1)},I=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==C(t)?t.split(""):Object(t)},q=function(t){return I(h(t))},D=Math.min,H=function(t){return t>0?D(l(t),9007199254740991):0},V=Math.max,B=Math.min,W="__core-js_shared__",U=p[W]||(p[W]={}),J=function(t){return U[t]||(U[t]={})},K=0,Y=Math.random(),z=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++K+Y).toString(36))},Q=J("keys"),X=function(t){return Q[t]||(Q[t]=z(t))},Z=function(t){return function(e,r,n){var o,i=q(e),a=H(i.length),c=function(t,e){return(t=l(t))<0?V(t+e,0):B(t,e)}(n,a);if(t&&r!=r){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((t||c in i)&&i[c]===r)return t||c||0;return!t&&-1}}(!1),$=X("IE_PROTO"),tt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),et=Object.keys||function(t){return function(t,e){var r,n=q(t),o=0,i=[];for(r in n)r!=$&&F(n,r)&&i.push(r);for(;e.length>o;)F(n,r=e[o++])&&(~Z(i,r)||i.push(r));return i}(t,tt)},rt=_?Object.defineProperties:function(t,e){m(t);for(var r,n=et(e),o=n.length,i=0;o>i;)S.f(t,r=n[i++],e[r]);return t},nt=p.document,ot=nt&&nt.documentElement,it=X("IE_PROTO"),at=function(){},ct="prototype",ut=function(){var t,e=L("iframe"),r=tt.length;for(e.style.display="none",ot.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ut=t.F;r--;)delete ut[ct][tt[r]];return ut()},st=Object.create||function(t,e){var r;return null!==t?(at[ct]=m(t),r=new at,at[ct]=null,r[it]=t):r=ut(),void 0===e?r:rt(r,e)},ft=e(function(t){var e=J("wks"),r=p.Symbol,n="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=n&&r[t]||(n?r:z)("Symbol."+t))}).store=e}),lt=S.f,ht=ft("toStringTag"),pt=function(t,e,r){t&&!F(t=r?t:t.prototype,ht)&&lt(t,ht,{configurable:!0,value:e})},vt={};P(vt,ft("iterator"),function(){return this});var dt=X("IE_PROTO"),yt=Object.prototype,gt=Object.getPrototypeOf||function(t){return t=function(t){return Object(h(t))}(t),F(t,dt)?t[dt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?yt:null},mt=ft("iterator"),wt=!([].keys&&"next"in[].keys()),_t="values",xt=function(){return this},bt=function(t,e,r,n,o,i,a){!function(t,e,r){t.prototype=st(vt,{next:j(1,r)}),pt(t,e+" Iterator")}(r,e,n);var c,u,s,f=function(t){if(!wt&&t in v)return v[t];switch(t){case"keys":case _t:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=e+" Iterator",h=o==_t,p=!1,v=t.prototype,d=v[mt]||v["@@iterator"]||o&&v[o],y=d||f(o),g=o?h?f("entries"):y:void 0,m="Array"==e?v.entries||d:d;if(m&&(s=gt(m.call(new t)))!==Object.prototype&&s.next&&pt(s,l,!0),h&&d&&d.name!==_t&&(p=!0,y=function(){return d.call(this)}),a&&(wt||p||!v[mt])&&P(v,mt,y),N[e]=y,N[l]=xt,o)if(c={values:h?y:f(_t),keys:i?y:f("keys"),entries:g},a)for(u in c)u in v||R(v,u,c[u]);else M(M.P+M.F*(wt||p),e,c);return c},Lt=function(t){return function(e,r){var n,o,i=String(h(e)),a=l(r),c=i.length;return a<0||a>=c?t?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===c||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):n:t?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}}(!0);bt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=Lt(e,r),this._i+=t.length,{value:t,done:!1})});var Et=function(t,e){return{value:e,done:!!t}};bt(Array,"Array",function(t,e){this._t=q(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,Et(1)):"keys"==e?Et(0,r):"values"==e?Et(0,t[r]):Et(0,[r,t[r]])},"values");N.Arguments=N.Array;for(var Ot=ft("toStringTag"),St="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),jt=0;jt<St.length;jt++){var Pt=St[jt],Tt=p[Pt],kt=Tt&&Tt.prototype;kt&&!kt[Ot]&&P(kt,Ot,Pt),N[Pt]=N.Array}var Mt,Rt,At,Ft=ft("toStringTag"),Nt="Arguments"==C(function(){return arguments}()),Gt=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ft))?r:Nt?C(e):"Object"==(n=C(e))&&"function"==typeof e.callee?"Arguments":n},Ct=function(t,e,r,n){try{return n?e(m(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&m(o.call(t)),e}},It=ft("iterator"),qt=Array.prototype,Dt=ft("iterator"),Ht=v.getIteratorMethod=function(t){if(void 0!=t)return t[Dt]||t["@@iterator"]||N[Gt(t)]},Vt=e(function(t){var e={},r={},n=t.exports=function(t,n,o,i,a){var c,u,s,f,l=a?function(){return t}:Ht(t),h=y(o,i,n?2:1),p=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(N.Array===t||qt[It]===t)}(l)){for(c=H(t.length);c>p;p++)if((f=n?h(m(u=t[p])[0],u[1]):h(t[p]))===e||f===r)return f}else for(s=l.call(t);!(u=s.next()).done;)if((f=Ct(s,h,u.value,n))===e||f===r)return f};n.BREAK=e,n.RETURN=r}),Bt=ft("species"),Wt=function(t,e){var r,n=m(t).constructor;return void 0===n||void 0==(r=m(n)[Bt])?e:d(r)},Ut=p.process,Jt=p.setImmediate,Kt=p.clearImmediate,Yt=p.MessageChannel,zt=p.Dispatch,Qt=0,Xt={},Zt="onreadystatechange",$t=function(){var t=+this;if(Xt.hasOwnProperty(t)){var e=Xt[t];delete Xt[t],e()}},te=function(t){$t.call(t.data)};Jt&&Kt||(Jt=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return Xt[++Qt]=function(){!function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}t.apply(r,e)}("function"==typeof t?t:Function(t),e)},Mt(Qt),Qt},Kt=function(t){delete Xt[t]},"process"==C(Ut)?Mt=function(t){Ut.nextTick(y($t,t,1))}:zt&&zt.now?Mt=function(t){zt.now(y($t,t,1))}:Yt?(At=(Rt=new Yt).port2,Rt.port1.onmessage=te,Mt=y(At.postMessage,At,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(Mt=function(t){p.postMessage(t+"","*")},p.addEventListener("message",te,!1)):Mt=Zt in L("script")?function(t){ot.appendChild(L("script"))[Zt]=function(){ot.removeChild(this),$t.call(t)}}:function(t){setTimeout(y($t,t,1),0)});var ee={set:Jt,clear:Kt},re=ee.set,ne=p.MutationObserver||p.WebKitMutationObserver,oe=p.process,ie=p.Promise,ae="process"==C(oe),ce={f:function(t){return new function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=d(e),this.reject=d(r)}(t)}},ue=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},se=function(t,e){if(m(t),g(e)&&e.constructor===t)return e;var r=ce.f(t);return(0,r.resolve)(e),r.promise},fe=ft("species"),le=ft("iterator"),he=!1;try{[7][le]().return=function(){he=!0}}catch(t){}var pe,ve,de,ye,ge=ee.set,me=function(){var t,e,r,n=function(){var n,o;for(ae&&(n=oe.domain)&&n.exit();t;){o=t.fn,t=t.next;try{o()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(ae)r=function(){oe.nextTick(n)};else if(ne){var o=!0,i=document.createTextNode("");new ne(n).observe(i,{characterData:!0}),r=function(){i.data=o=!o}}else if(ie&&ie.resolve){var a=ie.resolve();r=function(){a.then(n)}}else r=function(){re.call(p,n)};return function(n){var o={fn:n,next:void 0};e&&(e.next=o),t||(t=o,r()),e=o}}(),we="Promise",_e=p.TypeError,xe=p.process,be=p[we],Le="process"==Gt(xe),Ee=function(){},Oe=ve=ce.f,Se=!!function(){try{var t=be.resolve(1),e=(t.constructor={})[ft("species")]=function(t){t(Ee,Ee)};return(Le||"function"==typeof PromiseRejectionEvent)&&t.then(Ee)instanceof e}catch(t){}}(),je=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},Pe=function(t,e){if(!t._n){t._n=!0;var r=t._c;me(function(){for(var n=t._v,o=1==t._s,i=0,a=function(e){var r,i,a=o?e.ok:e.fail,c=e.resolve,u=e.reject,s=e.domain;try{a?(o||(2==t._h&&Me(t),t._h=1),!0===a?r=n:(s&&s.enter(),r=a(n),s&&s.exit()),r===e.promise?u(_e("Promise-chain cycle")):(i=je(r))?i.call(r,c,u):c(r)):u(n)}catch(t){u(t)}};r.length>i;)a(r[i++]);t._c=[],t._n=!1,e&&!t._h&&Te(t)})}},Te=function(t){ge.call(p,function(){var e,r,n,o=t._v,i=ke(t);if(i&&(e=ue(function(){Le?xe.emit("unhandledRejection",o,t):(r=p.onunhandledrejection)?r({promise:t,reason:o}):(n=p.console)&&n.error&&n.error("Unhandled promise rejection",o)}),t._h=Le||ke(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},ke=function(t){if(1==t._h)return!1;for(var e,r=t._a||t._c,n=0;r.length>n;)if((e=r[n++]).fail||!ke(e.promise))return!1;return!0},Me=function(t){ge.call(p,function(){var e;Le?xe.emit("rejectionHandled",t):(e=p.onrejectionhandled)&&e({promise:t,reason:t._v})})},Re=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Pe(e,!0))},Ae=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw _e("Promise can't be resolved itself");(e=je(t))?me(function(){var n={_w:r,_d:!1};try{e.call(t,y(Ae,n,1),y(Re,n,1))}catch(t){Re.call(n,t)}}):(r._v=t,r._s=1,Pe(r,!1))}catch(t){Re.call({_w:r,_d:!1},t)}}};Se||(be=function(t){!function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!")}(this,be,we,"_h"),d(t),pe.call(this);try{t(y(Ae,this,1),y(Re,this,1))}catch(t){Re.call(this,t)}},(pe=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,r){for(var n in e)r&&t[n]?t[n]=e[n]:P(t,n,e[n]);return t}(be.prototype,{then:function(t,e){var r=Oe(Wt(this,be));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Le?xe.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Pe(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),de=function(){var t=new pe;this.promise=t,this.resolve=y(Ae,t,1),this.reject=y(Re,t,1)},ce.f=Oe=function(t){return t===be||t===ye?new de(t):ve(t)}),M(M.G+M.W+M.F*!Se,{Promise:be}),pt(be,we),function(t){var e="function"==typeof v[t]?v[t]:p[t];_&&e&&!e[fe]&&S.f(e,fe,{configurable:!0,get:function(){return this}})}(we),ye=v[we],M(M.S+M.F*!Se,we,{reject:function(t){var e=Oe(this);return(0,e.reject)(t),e.promise}}),M(M.S+!0*M.F,we,{resolve:function(t){return se(this===ye?be:this,t)}}),M(M.S+M.F*!(Se&&function(t,e){if(!e&&!he)return!1;var r=!1;try{var n=[7],o=n[le]();o.next=function(){return{done:r=!0}},n[le]=function(){return o},t(n)}catch(t){}return r}(function(t){be.all(t).catch(Ee)})),we,{all:function(t){var e=this,r=Oe(e),n=r.resolve,o=r.reject,i=ue(function(){var r=[],i=0,a=1;Vt(t,!1,function(t){var c=i++,u=!1;r.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,r[c]=t,--a||n(r))},o)}),--a||n(r)});return i.e&&o(i.v),r.promise},race:function(t){var e=this,r=Oe(e),n=r.reject,o=ue(function(){Vt(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}}),M(M.P+M.R,"Promise",{finally:function(t){var e=Wt(this,v.Promise||p.Promise),r="function"==typeof t;return this.then(r?function(r){return se(e,t()).then(function(){return r})}:t,r?function(r){return se(e,t()).then(function(){throw r})}:t)}}),M(M.S,"Promise",{try:function(t){var e=ce.f(this),r=ue(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}});var Fe=v.Promise,Ne=e(function(t){t.exports={default:Fe,__esModule:!0}}),Ge=t(Ne),Ce=t(e(function(t,e){e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(Ne);e.default=function(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,n){function o(i,a){try{var c=e[i](a),u=c.value}catch(t){return void n(t)}if(!c.done)return r.default.resolve(u).then(function(t){o("next",t)},function(t){o("throw",t)});t(u)}return o("next")})}}}));AFRAME.registerComponent("place-for-space",{schema:{templates:{default:[]},mixins:{default:[]},otherwise:{default:""}},init:function(){var t=Ce(u.mark(function t(){var e,r;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,altspace.getSpace();case 2:e=t.sent,console.log(e),(r=this.data.templates.indexOf(e.templateSid))>=0?this.el.setAttribute("mixin",this.data.mixins[r]):this.el.setAttribute("mixin",this.data.otherwise);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}),AFRAME.registerComponent("list-library-items",{schema:{service:{type:"string",default:"poly"},page:{type:"int",default:0}},update:function(){var t=Ce(u.mark(function t(e){var r;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.el.sceneEl.systems[this.data.service+"-service"].fakeGetListing(this.data.page);case 2:r=t.sent,console.log(r);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}),AFRAME.registerSystem("poly-service",{schema:{key:{type:"string"}},init:function(){this.pages=[],this.loader=new AFRAME.THREE.FileLoader,this.query="https://poly.googleapis.com/v1/assets/?format=GLTF2&maxComplexity=SIMPLE&key="+this.data.key},getListing:function(){var t=Ce(u.mark(function t(e){var n,o,i,a,c;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<0)){t.next=2;break}throw new Error("Requested page ("+e+") before beginning");case 2:if(!this.pages[e]){t.next=6;break}return t.abrupt("return",this.pages[e]);case 6:if(0!==e){t.next=15;break}return t.next=9,r(this.query,this.loader);case 9:return n=t.sent,o=JSON.parse(n),this.pages.push(o),t.abrupt("return",o);case 15:return t.prev=15,t.next=18,this.getOrFetchListing(e-1);case 18:i=t.sent,t.next=24;break;case 21:throw t.prev=21,t.t0=t.catch(15),new Error("Requested page ("+e+") past end");case 24:if(!prevPage.nextPageToken){t.next=33;break}return t.next=27,r(this.query+"&pageToken="+prevPage.nextPageToken,this.loader);case 27:return a=t.sent,c=JSON.parse(a),this.pages.push(c),t.abrupt("return",c);case 33:throw new Error("Requested page ("+e+") past end");case 34:case"end":return t.stop()}},t,this,[[15,21]])}));return function(e){return t.apply(this,arguments)}}(),fakeGetListing:function(){var t=Ce(u.mark(function t(e){var n;return u.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("testdata/listing.json",this.loader);case 2:return n=t.sent,t.abrupt("return",JSON.parse(n));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})}();
